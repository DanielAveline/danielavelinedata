<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SQL Puzzles</title>
  <link rel="stylesheet" href="/assets/styles.css"/>

  <!-- Page-scoped layout & polish -->
  <style>
    /* 3-column layout on desktop: Puzzles | Schema | Main */
    .puzzles-wrap {
      max-width: 1200px;
      margin: 1.25rem auto 2rem;
      padding: 0 1rem;
      display: grid;
      grid-template-columns: 260px 280px 1fr;
      gap: 1rem;
    }
    .panel { background: #fff; color: #111; }

    /* Lighter title bar */
    .hd-bar {
      background: #f7f8fa;
      border-bottom: 1px solid rgba(17,17,17,.10);
      border-top-left-radius: 10px;
      border-top-right-radius: 10px;
      padding: .75rem 1rem;
    }
    .hd-bar h2 { margin: 0; font-size: 1.05rem; }

    /* Left: puzzles list */
    .sidebar { padding: 0; }
    .sidebar .meta { margin: .5rem 1rem .75rem; color: #5b616e; }
    .list { list-style: none; padding: .5rem .6rem .9rem; }
    .list li { cursor: pointer; padding: .55rem .65rem; border-radius: .6rem; }
    .list li + li { margin-top: .25rem; }

    /* Middle: schema accordion */
    .schema-panel { padding: 0; }
    .schema-box-wrap { padding: .75rem 1rem 1rem; }
    .schema-box { padding: 0; background: transparent; border: 0; }
    .schema-accordion {
      padding: .75rem 1rem 1rem;
      border: 1px solid rgba(17,17,17,.12);
      border-radius: 10px;
      background: #fbfbfd;
    }
    .schema-dataset {
      font-weight: 700; color: #0f172a; margin-bottom: .5rem;
    }
    .schema-accordion details {
      border: 1px solid rgba(17,17,17,.08);
      border-radius: 8px;
      background: #fff;
      margin: .5rem 0;
      overflow: hidden;
    }
    .schema-accordion summary {
      list-style: none;
      cursor: pointer;
      padding: .6rem .75rem;
      font-weight: 600;
      display: flex; align-items: center; gap: .5rem;
    }
    .schema-accordion summary::-webkit-details-marker { display: none; }
    .schema-accordion summary::before {
      content: 'â–¸';
      display: inline-block;
      transform: rotate(0deg);
      transition: transform .15s ease;
      opacity: .75;
    }
    .schema-accordion details[open] summary::before { transform: rotate(90deg); }
    .schema-accordion .tbl-body {
      border-top: 1px solid rgba(17,17,17,.06);
      background: #fafbff;
      padding: .55rem .75rem .7rem;
      font-family: ui-monospace,SFMono-Regular,Menlo,Consolas,"Liberation Mono",monospace;
      font-size: .9rem;
      color: #2b2f36;
      white-space: pre-wrap;
    }
    .schema-accordion .col-line { display: block; padding: .15rem 0; }
    .schema-accordion .pk {
      display:inline-block; margin-left:.35rem; padding:.05rem .35rem;
      border-radius:6px; font-size:.75em; background:#eef2ff; color:#3730a3; border:1px solid #e0e7ff;
    }

    /* Right: main content */
    .main-panel { padding: 0; }
    .main-head { padding: .9rem 1rem .75rem; }
    .main-meta { color: #5b616e; }
    .main-body { padding: .5rem 1rem 1rem; }

    /* Stack editor and results vertically for a bigger, single-flow feel */
    .stack {
      display: grid;
      grid-template-columns: 1fr;
      gap: .9rem;
    }
    .editor {
      width: 100%;
      min-height: 220px;
      resize: vertical;
    }
    .results { min-height: 180px; }

    /* Toolbar under editor */
    .toolbar { display: flex; gap: .6rem; flex-wrap: wrap; }

    /* Mobile: collapse to one column */
    @media (max-width: 1100px) {
      .puzzles-wrap { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body class="__hydrating __fade-ready">
  <div id="site-header"></div>

  <main>
    <section class="puzzles-wrap">
      <!-- Left: SQL Puzzles -->
      <aside class="panel sidebar">
        <div class="hd-bar"><h2>SQL Puzzles</h2></div>
        <p class="meta">A new set every week: Easy, Medium, Hard.</p>
        <ul id="puzzleList" class="list" role="listbox" aria-label="Puzzles"></ul>
      </aside>

      <!-- Middle: Schema -->
      <aside class="panel schema-panel">
        <div class="hd-bar"><h2>Schema</h2></div>
        <div class="schema-box-wrap">
          <div id="schemaBox" class="schema-box"></div>
        </div>
      </aside>

      <!-- Right: Main -->
      <article class="panel main-panel">
        <div class="hd-bar">
          <h2 id="puzzleTitle" style="margin:0 0 .1rem;"></h2>
          <div id="puzzleMeta" class="main-meta"></div>
        </div>

        <div class="main-body">
          <p id="puzzleGoal" class="main-meta" style="margin:0 0 .8rem;"></p>

          <div class="stack">
            <div>
              <label for="sqlEditor" class="meta" style="display:block;margin-bottom:.25rem;">Your SQL</label>
              <textarea id="sqlEditor" class="editor"></textarea>

              <!-- Buttons: under the editor -->
              <div class="toolbar">
                <button disabled>Run</button>
                <button disabled>Check Answer</button>
                <!-- Reveal Solution removed -->
              </div>
            </div>

            <div>
              <label class="meta" style="display:block;margin-bottom:.25rem;">Results</label>
              <div id="sqlResults" class="results panel" style="padding:.6rem;"></div>
            </div>
          </div>
        </div>
      </article>
    </section>
  </main>

  <div id="site-footer"></div>

  <script src="/assets/js/partials.js" defer></script>
  <script type="module" src="/assets/js/sql/puzzles-page.js"></script>
</body>
</html>


