<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SQL Puzzles</title>
  <link rel="stylesheet" href="/assets/styles.css"/>

  <!-- Page-scoped layout & polish -->
  <style>
    /* Wider main, bigger schema column, tighter left nav */
    .puzzles-wrap {
      max-width: 1440px;
      margin: 1.25rem auto 2rem;
      padding: 0 1rem;
      display: grid;
      grid-template-columns: 220px 320px 1fr;  /* Puzzles | Schema (wider) | Main */
      gap: 1rem;
    }
    .panel { background: #fff; color: #111; }

    /* Header bars */
    .hd-bar {
      background: #f7f8fa;
      border-bottom: 1px solid rgba(17,17,17,.10);
      border-top-left-radius: 10px;
      border-top-right-radius: 10px;
      padding: .75rem 1rem;
    }
    .hd-bar h2 { margin: 0; font-size: 1.05rem; }

    /* ---------- Left: Month → Week tree ---------- */
    .sidebar { padding: 0; }
    .sidebar .meta { margin: .5rem 1rem .75rem; color: #5b616e; }
    #monthTree { padding: .5rem .6rem 1rem; }
    #monthTree details {
      border: 1px solid rgba(17,17,17,.08);
      border-radius: 10px;
      background: #fff;
      margin: .5rem 0;
      overflow: hidden;
    }
    #monthTree summary {
      cursor: pointer;
      list-style: none;
      padding: .55rem .7rem;
      font-weight: 700;
      display: flex; align-items: center; gap: .5rem;
    }
    #monthTree summary::-webkit-details-marker { display: none; }
    #monthTree summary::before {
      content: '▸';
      transform: rotate(0deg);
      transition: transform .15s ease;
      opacity: .75;
    }
    #monthTree details[open] > summary::before { transform: rotate(90deg); }
    .weeks {
      padding: .5rem .6rem .7rem;
      border-top: 1px solid rgba(17,17,17,.06);
    }
    .weeks li {
      list-style: none;
      margin: .25rem 0;
      padding: .5rem .55rem;
      border-radius: .6rem;
      cursor: pointer;
    }
    .weeks li[aria-current="true"] {
      background: rgba(37,99,235,.10);
      border: 1px solid rgba(37,99,235,.25);
      font-weight: 600;
    }
    .weeks li.is-disabled {
      opacity: .45; cursor: not-allowed;
    }

    /* ---------- Middle: Schema accordion (bigger) ---------- */
    .schema-panel { padding: 0; }
    .schema-box-wrap { padding: .75rem 1rem 1rem; }
    .schema-accordion {
      padding: .75rem 1rem 1rem;
      border: 1px solid rgba(17,17,17,.12);
      border-radius: 10px;
      background: #fbfbfd;
      max-height: 72vh;              /* taller and scrollable */
      overflow: auto;
    }
    .schema-dataset { font-weight: 700; color: #0f172a; margin-bottom: .5rem; }
    .schema-accordion details {
      border: 1px solid rgba(17,17,17,.08);
      border-radius: 8px;
      background: #fff;
      margin: .5rem 0;
      overflow: hidden;
    }
    .schema-accordion summary {
      list-style: none;
      cursor: pointer;
      padding: .6rem .75rem;
      font-weight: 600;
      display: flex; align-items: center; gap: .5rem;
    }
    .schema-accordion summary::-webkit-details-marker { display: none; }
    .schema-accordion summary::before {
      content: '▸';
      transform: rotate(0deg);
      transition: transform .15s ease;
      opacity: .75;
    }
    .schema-accordion details[open] summary::before { transform: rotate(90deg); }
    .schema-accordion .tbl-body {
      border-top: 1px solid rgba(17,17,17,.06);
      background: #fafbff;
      padding: .55rem .75rem .7rem;
      font-family: ui-monospace,SFMono-Regular,Menlo,Consolas,"Liberation Mono",monospace;
      font-size: .9rem;
      color: #2b2f36;
      white-space: pre-wrap;
    }
    .schema-accordion .col-line { display: block; padding: .15rem 0; }
    .schema-accordion .pk {
      display:inline-block; margin-left:.35rem; padding:.05rem .35rem;
      border-radius:6px; font-size:.75em; background:#eef2ff; color:#3730a3; border:1px solid #e0e7ff;
    }

    /* ---------- Right: main content (editor/results) ---------- */
    .main-panel { padding: 0; }
    .main-head { padding: .9rem 1rem .75rem; }
    .main-meta { color: #5b616e; }
    .main-body { padding: .5rem 1rem 1rem; }

    .stack { display: grid; grid-template-columns: 1fr; gap: .9rem; }
    .editor { width: 100%; min-height: 360px; resize: vertical; }
    .results { min-height: 360px; }

    .toolbar { display: flex; gap: .6rem; flex-wrap: wrap; }

    /* Mobile */
    @media (max-width: 1100px) {
      .puzzles-wrap { grid-template-columns: 1fr; }
      .schema-accordion { max-height: none; }
    }
  </style>
</head>
<body class="__hydrating __fade-ready">
  <div id="site-header"></div>

  <main>
    <section class="puzzles-wrap">
      <!-- Left: SQL Puzzles (Month → Week tree) -->
      <aside class="panel sidebar">
        <div class="hd-bar"><h2>SQL Puzzles</h2></div>
        <p class="meta">A new set every week: Easy, Medium, Hard.</p>
        <div id="monthTree" role="tree" aria-label="Months and weeks"></div>
      </aside>

      <!-- Middle: Schema (bigger) -->
      <aside class="panel schema-panel">
        <div class="hd-bar"><h2>Schema</h2></div>
        <div class="schema-box-wrap">
          <div id="schemaBox"></div>
        </div>
      </aside>

      <!-- Right: Main -->
      <article class="panel main-panel">
        <div class="hd-bar">
          <h2 id="puzzleTitle" style="margin:0 0 .1rem;"></h2>
          <div id="puzzleMeta" class="main-meta"></div>
        </div>

        <div class="main-body">
          <p id="puzzleGoal" class="main-meta" style="margin:0 0 .8rem;"></p>

          <div class="stack">
            <div>
              <label for="sqlEditor" class="meta" style="display:block;margin-bottom:.25rem;">Your SQL</label>
              <textarea id="sqlEditor" class="editor"></textarea>

              <!-- Buttons under editor -->
              <div class="toolbar">
                <button disabled>Run</button>
                <button disabled>Check Answer</button>
              </div>
            </div>

            <div>
              <label class="meta" style="display:block;margin-bottom:.25rem;">Results</label>
              <div id="sqlResults" class="results panel" style="padding:.6rem;"></div>
            </div>
          </div>
        </div>
      </article>
    </section>
  </main>

  <div id="site-footer"></div>

  <script src="/assets/js/partials.js" defer></script>
  <script type="module" src="/assets/js/sql/puzzles-page.js"></script>
</body>
</html>




